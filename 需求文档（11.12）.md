# 需求文档

## 1.需求分析任务

### 1.1 背景

### 问题背景

为了更好的服务于图书馆运转功能，现为图书馆的借还书功能设计数据库。要求能够对图书资料进行管理，如登记新书，删除不存在的书目，对已经变更的图书信息进行修改，还可以根据多种条件从数据库中查询书目的详细信息。能对新读者信息进行登记，对已经变更的读者信息进行修改，对不再借阅的读者信息进行删除。还可以查询读者的详细信息，以及读者借阅过的书目和正在借阅的书目。需要提供借阅登记表和返还登记表来管理借阅，并且提供查询借阅次数最高的前10个书目。借此为用户提供更加健全完善的服务。

### 现实环境

#### 部门组成情况

图书馆可提供pc机供图书馆管理人员以及读者使用。考虑到现实背景，使用该系统的人员为信息咨询部人员与流通部门人员，以及大学本科及以上的学生、老师。主要教育背景皆为大学本科及以上，拥有一定的计算机基础，能够使用英文实行基本的交流。

#### 业务活动

1）在新书到馆时，登入书籍信息。

2）当读者借阅书籍时，更新书籍的在库信息。当书籍信息发生变化或错误时，更新书籍信息，以及删除失效书籍

3）添加图书馆新读者，并为其开通图书馆借还书系统的读者使用账号。

4）协助读者借书、还书，并计算出超过借书期限的读者的应缴费用

5）提供借阅榜供查阅借阅排行前十的书籍。

#### 用户需求

读者：

1. 登陆借还书系统，查询个人信息并更改密码
2. 根据书名/索书号查询书籍信息。
3. 查询自己的历史借书记录。
4. 查询自己正在借阅的图书记录。
5. 查询借阅数前十的书籍。

管理员：

1. 登陆借还书系统，修改个人密码。
2. 根据书名/索书号查询书籍信息，也可以修改某一本书的信息。
3. 根据读者编号查询读者信息，并修改读者信息及密码。
4. 查询借阅历史记录，查询未归还书籍。
5. 协助读者借书还书。
6. 查询借阅数前十的书籍。

#### 系统边界

## 任务描述

### 系统目标

（1）   实用性原则：真正为用户的实际工作服务，按照图书馆管理工作的实际流程，设计出实用的图书馆借还书管理系统。

（2）   可靠性原则：必须为图书馆提供信息安全的服务，以保证酒店信息的不被泄露。

（3）   友好性原则：本图书馆借还书管理系统面向的用户是图书馆管理员与读者，所以系统操作上要求简单、方便、快捷，便于用户使用。

（4）   可扩展性原则：采用开发的标准和接口，便于系统向更大的规模和功能扩展。

### 系统功能需求

根据图书馆借还书管理系统的理念，此图书馆借还书管理系统必须满足以下需求：

（1）   具有管理图书信息与读者信息的功能

（2）   能快速、准确地了解图书的在馆数目与馆藏书目，以便借书顺利实现

（3）   提供多种手段查询读者信息、图书信息以及读者的阅读信息

（4）   提供借阅登记表和返还登记表来管理借阅

（5）   提供查询借阅次数最高的前10个书目

（6）   提供简单的图书馆管理人员的添加用户和修改密码功能

### 系统性能需求

为了保证系统能够长期、安全、稳定、可靠、高效的运行，系统应该满足以下的性能需求：

（1）   系统处理的准确性和及时性

系统处理的准确性和及时性是系统的必要性能。在系统设计和开发过程中，要充分考虑系统当前和将来可能承受的工作量，使系统的处理能力和响应时间能够满足用户对信息的处理。由于系统的查询功能对于整个系统的功能和性能完成很重要。从系统的多个数据来源来看，图书信息查询，读者信息查询，图书排行榜预览，其准确性很大程度上决定了系统的成败。因此，在系统开发过程中，系统采用优化的SQL语句及安全扩展存储过程来保证系统的准确性和及时性。

（2）   系统的开放性和系统的可扩充性

系统在开发过程中，应该充分考虑以后的可扩充性。例如读者查询和图书信息设置等模块也会不断的更新和完善。所有这些都要求系统提供足够的手段进行功能的调整和扩充。而要实现这一点，应通过系统的开放性来完成，既系统应是一个开放系统，只要符合一定的规范，可以简单的加入和减少系统的模块，配置系统的硬件。通过软件的修补、 替换完成系统的升级和更新换代。

（3）   系统的易用性

本图书馆借还书管理系统面向的用户是图书馆工作人员与读者，使用人员往往对计算机比较熟悉，但不够专业，所以系统操作上要求简单、方便、快捷，更加服务于用户。这就要求系统能够提供良好的用户接口，易用的人机交互界面。

## 系统分析

### 数据字典

#### 数据项

|                        |                                           |
| ---------------------- | ----------------------------------------- |
| 数据项                 | 索书号                                    |
| 含义说明               | 馆内唯一标注图书信息的编码                |
| 类型                   | char                                      |
| 长度                   | 8                                         |
| 取值含义               | 分类号（由字母和数字组成）+种次号（数字） |
| 与其他数据项的逻辑关系 |                                           |

|                        |                        |
| ---------------------- | ---------------------- |
| 数据项                 | 图书名称               |
| 含义说明               | 图书的唯一名称         |
| 类型                   | char                   |
| 长度                   | 50                     |
| 取值含义               | 定义图书的标志，可重复 |
| 与其他数据项的逻辑关系 | 与图书一一对应         |

|                        |                                  |
| ---------------------- | -------------------------------- |
| 数据项                 | 主要作者                         |
| 含义说明               | 图书的主要作者                   |
| 类型                   | char                             |
| 长度                   | 10                               |
| 取值含义y              | 由图书出版信息中作者顺位第一得到 |
| 与其他数据项的逻辑关系 |                                  |

|                        |                                  |
| ---------------------- | -------------------------------- |
| 数据项                 | 出版社                           |
| 含义说明               | 该图书的出版社名称               |
| 类型                   | char                             |
| 长度                   | 20                               |
| 取值含义               | 由图书出版信息中出版社的信息可得 |
| 与其他数据项的逻辑关系 |                                  |



|                        |                            |
| ---------------------- | -------------------------- |
| 数据项                 | 出版日期                   |
| 含义说明               | 该图书的出版日期           |
| 类型                   | datetime                   |
| 长度                   | 4                          |
| 取值含义               | 该图书出版信息中的出版年份 |
| 与其他数据项的逻辑关系 |                            |

|                        |                                                          |
| ---------------------- | -------------------------------------------------------- |
| 数据项                 | 在馆数量                                                 |
| 含义说明               | 该图书目前在图书馆内的数量                               |
| 类型                   | int                                                      |
| 长度                   | 2                                                        |
| 取值含义               | 最多还可以提供多少本书借给读者                           |
| 与其他数据项的逻辑关系 | 决定读者是否能够借到这本书，由馆藏数量和实际借书情况决定 |

|                        |                                                |
| ---------------------- | ---------------------------------------------- |
| 数据项                 | 馆藏数量                                       |
| 含义说明               | 该图书馆总共拥有该书的数量                     |
| 类型                   | int                                            |
| 长度                   | 2                                              |
| 取值含义               | 只有图书馆购入该书或者该书损坏、丢失时才做调整 |
| 与其他数据项的逻辑关系 | 决定初始在馆数量                               |

|                        |                                                              |
| ---------------------- | ------------------------------------------------------------ |
| 数据项                 | 读者编号                                                     |
| 含义说明               | 唯一标识读者身份的编号                                       |
| 类型                   | char                                                         |
| 长度                   | 8                                                            |
| 取值含义               | 读者申请图书证的编号，按照流水号编排，第一位为读者级别，G代表本科生，M代表研究生，D代表博士，T代表教师 |
| 与其他数据项的逻辑关系 | 由读者单位决定                                               |

|                        |                              |
| ---------------------- | ---------------------------- |
| 数据项                 | 读者姓名                     |
| 含义说明               | 读者身份证上的姓名           |
| 类型                   | char                         |
| 长度                   | 10                           |
| 取值含义               | 读者的真实姓名，用来标记读者 |
| 与其他数据项的逻辑关系 | 与读者一一对应               |

|                        |            |
| ---------------------- | ---------- |
| 数据项                 | 性别       |
| 含义说明               | 读者的性别 |
| 类型                   | char       |
| 长度                   | 2          |
| 取值含义               | “男”/“女”  |
| 与其他数据项的逻辑关系 |            |

|                        |                          |
| ---------------------- | ------------------------ |
| 数据项                 | 电话                     |
| 含义说明               | 读者的电话号码           |
| 类型                   | char                     |
| 长度                   | 11                       |
| 取值含义               | 读者信息，方便与读者联络 |
| 与其他数据项的逻辑关系 |                          |

|                        |                                          |
| ---------------------- | ---------------------------------------- |
| 数据项                 | 单位                                     |
| 含义说明               | 读者为学生（本科生/研究生/博士）还是老师 |
| 类型                   | char                                     |
| 长度                   | 11                                       |
| 取值含义               | 定义读者身份                             |
| 与其他数据项的逻辑关系 | 间接决定了读者最大借阅数                 |



|                        |                          |
| ---------------------- | ------------------------ |
| 数据项                 | 当前借阅数               |
| 含义说明               | 当前借阅数目             |
| 类型                   | int                      |
| 长度                   | 2                        |
| 取值含义               | 该读者当前借阅的图书数目 |
| 与其他数据项的逻辑关系 | 由读者借阅记录决定       |

|                        |                                                        |
| ---------------------- | ------------------------------------------------------ |
| 数据项                 | 可行借阅数                                             |
| 含义说明               | 可以执行的借阅数目                                     |
| 类型                   | int                                                    |
| 长度                   | 2                                                      |
| 取值含义               | 根据读者的级别来规定，T、D默认为12，M默认为8，G默认为6 |
| 与其他数据项的逻辑关系 | 由读者单位间接决定                                     |

|                        |                        |
| ---------------------- | ---------------------- |
| 数据项                 | 借书日期               |
| 含义说明               | 读者借阅该图书时的日期 |
| 类型                   | date                   |
| 长度                   |                        |
| 取值含义               | 记录读者借阅图书的时间 |
| 与其他数据项的逻辑关系 |                        |

|                        |                                    |
| ---------------------- | ---------------------------------- |
| 数据项                 | 还书日期                           |
| 含义说明               | 读者返还该图书时的日期             |
| 类型                   | date                               |
| 长度                   |                                    |
| 取值含义               | 记录读者归还书籍的时间，默认为null |
| 与其他数据项的逻辑关系 |                                    |

|                        |                                              |
| ---------------------- | -------------------------------------------- |
| 数据项                 | 归还标记                                     |
| 含义说明               | 代表读者是否归还该书                         |
| 类型                   | bool                                         |
| 长度                   | 1                                            |
| 取值含义               | true代表以归还，false代表未归还，默认为false |
| 与其他数据项的逻辑关系 |                                              |

|                        |                        |
| ---------------------- | ---------------------- |
| 数据项                 | 还书日期               |
| 含义说明               | 读者返还该图书时的日期 |
| 类型                   | date                   |
| 长度                   |                        |
| 取值含义               | 记录读者归还书籍的时间 |
| 与其他数据项的逻辑关系 |                        |

|                        |                                                       |
| ---------------------- | ----------------------------------------------------- |
| 数据项                 | 应缴金额                                              |
| 含义说明               | 读者归还图书应该缴纳的费用                            |
| 类型                   | int                                                   |
| 长度                   |                                                       |
| 取值含义               | 读者在本次借阅时，由于未按时还书导致的消费，初始值为0 |
| 与其他数据项的逻辑关系 | 由借书日期和还书日期决定                              |

|                        |                                  |
| ---------------------- | -------------------------------- |
| 数据项                 | 图书借阅次数                     |
| 含义说明               | 每种图书在记录中可查询的借阅次数 |
| 类型                   | int                              |
| 长度                   |                                  |
| 取值含义               | 为图书借阅排行的依据             |
| 与其他数据项的逻辑关系 | 由借阅记录决定                   |

|                        |                                              |
| ---------------------- | -------------------------------------------- |
| 数据项                 | 账号                                         |
| 含义说明               | 登陆系统的凭证                               |
| 类型                   | char                                         |
| 长度                   | 8                                            |
| 取值含义               | 登陆系统所需要的身份验证，并通过账号判断身份 |
| 与其他数据项的逻辑关系 | 读者账号为读者编号                           |

|                        |                                       |
| ---------------------- | ------------------------------------- |
| 数据项                 | 密码                                  |
| 含义说明               | 对应系统的账号密码                    |
| 类型                   | char                                  |
| 长度                   | 6-12                                  |
| 取值含义               | 登陆系统所需要的用户口令，使用md5加密 |
| 与其他数据项的逻辑关系 | 默认为123456                          |



#### 数据结构

|          |                                                              |
| -------- | ------------------------------------------------------------ |
| 数据结构 | 在库图书                                                     |
| 含义说明 | 归属于图书馆的任意一本书籍，是图书馆借还书系统中的重要组成部分，供读者借阅 |
| 组成     | 索书号，图书名称，主要作者，出版社，出版年份，在馆数量，馆藏数量，图书借阅次数 |

|          |                                                              |
| -------- | ------------------------------------------------------------ |
| 数据结构 | 读者                                                         |
| 含义说明 | 图书馆服务对象，定义了一位读者的相关信息。是图书馆借还书系统中的主题构成部分 |
| 组成     | 编号，姓名，性别，单位，电话，当前借阅数，可行借阅数         |

|          |                                                        |
| -------- | ------------------------------------------------------ |
| 数据结构 | 借阅记录                                               |
| 含义说明 | 是图书馆借还书系统的主题，定义了每一次借书、还书的记录 |
| 组成     | 读者编号，索书号，借书日期，还书日期，应缴金额         |

|          |                                  |
| -------- | -------------------------------- |
| 数据结构 | 用户口令                         |
| 含义说明 | 用户登陆系统的口令，并判断其身份 |
| 组成     | 账号，密码                       |



#### 数据流

|            |                                                              |
| ---------- | ------------------------------------------------------------ |
| 数据流编号 | F1                                                           |
| 数据流名称 | 书籍信息表                                                   |
| 简述       | 查询书籍信息，更新书籍信息，包括新书入库，原有书籍加购，移除部分书籍等 |
| 数据流来源 | 图书管理员                                                   |
| 数据流去向 | 图书管理员、读者                                             |
| 数据流组成 | 索书号，图书名称，主要作者，出版社，出版年份，在馆数量，馆藏数量，图书借阅次数 |
| 数据流量   | 100/天                                                       |
| 高峰流量   | 300/天                                                       |

|              |                                                      |
| ------------ | ---------------------------------------------------- |
| 数据流编号   | F2                                                   |
| 数据流名称   | 读者登记表                                           |
| 简述         | 更新书籍信息，包括新书入库，原有书籍加购等           |
| 数据流来源   | 顾客                                                 |
| 数据流去向   | 图书馆管理员                                         |
| 数据流组成成 | 编号，姓名，性别，单位，电话，当前借阅数，可行借阅数 |
| 数据流量     | 100/天                                               |
| 高峰流量     | 300/天                                               |

|            |                            |
| ---------- | -------------------------- |
| 数据流编号 | F3                         |
| 数据流名称 | 借书记录                   |
| 简述       | 记录读者每一次的借阅行为   |
| 数据流来源 | 读者，在库图书             |
| 数据流去向 | 图书管理员                 |
| 数据流组成 | 读者编号，索书号，借书日期 |
| 数据流量   | 1000/天                    |
| 高峰流量   | 2000/天                    |

|            |                                                |
| ---------- | ---------------------------------------------- |
| 数据流编号 | F4                                             |
| 数据流名称 | 归还记录                                       |
| 简述       | 记录读者每一次的归还行为                       |
| 数据流来源 | 读者，图书，借阅记录                           |
| 数据流去向 | 图书管理员                                     |
| 数据流组成 | 读者编号，索书号，借书日期，还书日期，应缴金额 |
| 数据流量   | 1000/天                                        |
| 高峰流量   | 2000/天                                        |

|            |                            |
| ---------- | -------------------------- |
| 数据流编号 | F5                         |
| 数据流名称 | 借阅榜                     |
| 简述       | 图书与其借阅次数           |
| 数据流来源 | 借书记录，归还记录         |
| 数据流去向 | 读者                       |
| 数据流组成 | 索书号，图书名称，借阅次数 |
| 数据流量   | 100/天                     |
| 高峰流量   | 300/天                     |

|            |                  |
| ---------- | ---------------- |
| 数据流编号 | F6               |
| 数据流名称 | 账号信息         |
| 简述       | 用户的账号与密码 |
| 数据流来源 | 读者登记表       |
| 数据流去向 | 图书管理员       |
| 数据流组成 | 账号，密码       |
| 数据流量   | 100/天           |
| 高峰流量   | 300/天           |

#### 处理逻辑描述

|              |                                        |
| ------------ | -------------------------------------- |
| 处理逻辑编号 | P1                                     |
| 处理逻辑名称 | 更新图书信息                           |
| 简述         | 书籍信息发生变动时，要及时更新书籍信息 |
| 输入的数据流 | 书籍信息表                             |
| 处理描述     | 对书籍信息书籍进行更新操作             |
| 输出的数据流 | 新的书籍信息表                         |
| 处理频率     | 100次/天                               |

|              |                                  |
| ------------ | -------------------------------- |
| 处理逻辑编号 | P2                               |
| 处理逻辑名称 | 查询图书信息                     |
| 简述         | 查询已入库的书籍的信息           |
| 输入的数据流 | 书籍信息表                       |
| 处理描述     | 根据书名或者索书号查询图书的信息 |
| 输出的数据流 | 书籍信息表                       |
| 处理频率     | 1000次/天                        |

|              |                                |
| ------------ | ------------------------------ |
| 处理逻辑编号 | P3                             |
| 处理逻辑名称 | 登记新读者                     |
| 简述         | 录入新注册用户的信息           |
| 输入的数据流 | 读者登记表                     |
| 处理描述     | 录入新用户信息，并为其分配账号 |
| 输出的数据流 | 账号信息，读者登记表           |
| 处理频率     | 100次/天                       |

|              |                                  |
| ------------ | -------------------------------- |
| 处理逻辑编号 | P4                               |
| 处理逻辑名称 | 借阅图书                         |
| 简述         | 对读者借阅图书的记录             |
| 输入的数据流 | 借书记录                         |
| 处理描述     | 按照读者的账号与有关书籍信息记录 |
| 输出的数据流 | 借书记录                         |
| 处理频率     | 1000次/天                        |

|              |                          |
| ------------ | ------------------------ |
| 处理逻辑编号 | P5                       |
| 处理逻辑名称 | 归还图书                 |
| 简述         | 读者归还图书的记录       |
| 输入的数据流 | 归还记录                 |
| 处理描述     | 按照当前日期录入归还记录 |
| 输出的数据流 | 归还记录                 |
| 处理频率     | 1000次/天                |

|              |                              |
| ------------ | ---------------------------- |
| 处理逻辑编号 | P6                           |
| 处理逻辑名称 | 借阅排行                     |
| 简述         | 查询借阅次数最高的十个书目   |
| 输入的数据流 | 书籍信息表                   |
| 处理描述     | 对借书记录中的图书借阅总次数 |
| 输出的数据流 | 借阅榜                       |
| 处理频率     | 10次/天                      |

|              |                                  |
| ------------ | -------------------------------- |
| 处理逻辑编号 | P7                               |
| 处理逻辑名称 | 验证登陆                         |
| 简述         | 用户登陆系统时的身份验证         |
| 输入的数据流 | 账号信息                         |
| 处理描述     | 输入账号与密码，验证身份是否正确 |
| 输出的数据流 | 账号信息                         |
| 处理频率     | 1000次/天                        |



#### 数据存储的描述

|              |                                                              |
| ------------ | ------------------------------------------------------------ |
| 数据存储编号 | S1                                                           |
| 数据存储名称 | 录入图书信息                                                 |
| 简述         | 记录图书信息更改、添加、删除等变动                           |
| 数据存储组成 | 索书号，图书名称，主要作者，出版社，出版年份，在馆数量，馆藏数量，图书借阅次数 |
| 关键字       | 索书号                                                       |
| 相关联的处理 | P1,P2                                                        |

|              |                                                |
| ------------ | ---------------------------------------------- |
| 数据存储编号 | S2                                             |
| 数据存储名称 | 借阅与归还                                     |
| 简述         | 记录读者与图书的借阅记录以及归还记录           |
| 数据存储组成 | 读者编号，索书号，借书日期，还书日期，应缴金额 |
| 关键字       | 读者编号，索书号，借书日期                     |
| 相关联的处理 | P4，P5                                         |

|              |                                                            |
| ------------ | ---------------------------------------------------------- |
| 数据存储编号 | S3                                                         |
| 数据存储名称 | 用户信息存储                                               |
| 简述         | 记录管理员以及读者的信息                                   |
| 数据存储组成 | 账号，密码，姓名，性别，单位，电话，当前借阅数，可行借阅数 |
| 关键字       | 账号                                                       |
| 相关联的处理 | P3，P7                                                     |

### 数据流图

顶层数据流图：

![顶层数据流图](C:\Users\wwwan\Desktop\DB_test\验收文档\顶层数据流图.png)

二级数据流图：



![二级数据流图1](C:\Users\wwwan\Desktop\DB_test\验收文档\二级数据流图1.png)

![二级数据流图2](C:\Users\wwwan\Desktop\DB_test\验收文档\二级数据流图2.png)

##  功能需求

### 功能需求点列述

读者：

![image-20191112104213719](C:\Users\wwwan\AppData\Roaming\Typora\typora-user-images\image-20191112104213719.png)



管理员：

![image-20191112105254006](C:\Users\wwwan\AppData\Roaming\Typora\typora-user-images\image-20191112105254006.png)



## 非功能需求

### 性能需求

在95%情况下满足下列要求：

#### 响应时间

以下处理响应时间不超过2s：

- 查询指定条件书籍详细信息
- 添加一本新书的详细信息
- 修改指定条件的书籍信息
- 删除指定条件的书籍信息
- 对读者信息的修改操作
- 读者借书以及还书操作

高并发情况下不超过上述时间的2倍

#### 系统容量

- 最大书籍数存储量为5×10^6
- 最大读者记录为1×10^5
- 最大信息存储时间为20年

### 安全需求

- 数据库设计满足规范化，至少应满足BCNF
- 数据库提供日志功能，可追踪数据库历史操作
- 软件系统无致命漏洞，后门，符合安全标准
- 合理利用SQL中用户权限以及视图对安全性的影响

### 界面要求

人性化、简单、易用的用户交互界面，用户学习时长几近为零。

### 交付要求

- 各阶段所撰写的文档
- 可行无误的图书馆系统

### 设计约束

#### 开发工具

- Microsoft SQL Server 2017
- Microsoft SQL Server Management 2019
- Microsoft Visual Studio 2019
- Microsoft Office Visio 2019

#### 运行环境

Windows平台

## 附录及参考文件

 [1]张海藩.软件工程导论(第6版)[M].清华大学出版社:北京,2013
[2]崔永红.Visual C#.NET程序设计(第2版)[M].清华大学出版社:北京,2019
[3]郑宇军.C#语言程序设计[M].清华大学出版社:北京,2011
[4]王珊.数据库系统概论(第5版)[M].高等教育出版社:北京,2014 



